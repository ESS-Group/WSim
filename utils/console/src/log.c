
/**
 *  \file    log.c
 *  \brief   Terminal log
 *  \author  Antoine Fraboulet
 *  \date    2006
 *  \license GPLv2
 **/

#include <stdlib.h>
#include <stdio.h>
#include <sys/types.h>
#include <inttypes.h>
#include <unistd.h>
#include <ctype.h>

#include "log.h"

/* ************************************************** */     
/* ************************************************** */     
/* ************************************************** */     

FILE* log_open(char* filename)
{
  FILE* f;
  f = fopen(filename,"w");
  return f;
}

/* ************************************************** */     
/* ************************************************** */     
/* ************************************************** */     

void log_close(FILE* f)
{
  if (f != NULL)
    fclose(f);
}

/* ************************************************** */     
/* ************************************************** */     
/* ************************************************** */     

void log_putchar(FILE* f, uint8_t v)
{
  if (f == NULL)
    return ;

  if (isprint(v))
    {
      fprintf(f,"%c",v);
    }
  else
    {
      switch (v)
	{
	case 0x0a:
	  fprintf(f,"[%02x]\n",v);
	  break;

	default:
	  fprintf(f,"[%02x]",v);
	  break;
	}
    }
}

/* ************************************************** */     
/* ************************************************** */     
/* ************************************************** */     

void log_print(FILE* f, char *s)
{
  if (f == NULL)
    return;

  fprintf(f,s);
}

/* ************************************************** */     
/* ************************************************** */     
/* ************************************************** */     
